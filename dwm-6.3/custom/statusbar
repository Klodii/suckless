#!/bin/bash

delim='|'

status(){
    # volume
    mute=$(pulsemixer --get-mute)
    if [[ $mute == 1 ]]; then
        echo "Mute vol."
    else
        pulsemixer --get-volume | awk '{print $1 "% vol."}'
    fi
    echo "$delim"

    # Wifi quality percentage and up/down if ethernet is connected
    grep "^\s*w" /proc/net/wireless | awk '{ print "WiFi", int($3 * 100 / 70) "%" }'
    # e* indicates ethernet connection
    # if you have wnat to indicate if a wifi is connected just change it to w*
    sed "s/down/Ethernet down/;s/up/Ethernet up/" /sys/class/net/e*/operstate
    echo "$delim"

    date "+%d %b %Y (%a) %H:%M"
    }

while :; do
    # tr is used to remove newlines because it does not render good
    xsetroot -name "$(status | tr '\n\' ' ')"

    sleep 1m
done
